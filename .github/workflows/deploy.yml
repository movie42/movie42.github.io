name: Deployment

on:
  push:
    branches: [develop]

jobs:
  deplyment:
    runs-on: ubuntu-latest
    environment: production
    steps:
      - uses: actions/checkout@v3

      - name: npm install
        run: npm ci

      - name: gatsby build
        run: npm build

      - name: Gatsby Publish ðŸš€
        uses: enriikke/gatsby-gh-pages-action@v2.2.0
        with:
          access-token: ${{ secrets.ACCESS_TOKEN }}
          deploy-branch: develop # The branch the action should deploy to.
          working-dir: public # The folder the action should deploy.
