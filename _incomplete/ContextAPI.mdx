---
slug: "/react/context-api"
date: "2023-05-02"
title: "ContextAPI"
tags: ["ContextAPI", "react", "상태"]
---

ContextAPI는 상태관리 도구가 아니라고 합니다. 하지만 맥락을 전달하는데는 괜찮은 도구라고 생각합니다. 물론 Context(맥락)이 변경되면 그 맥락 안에 있는 모든 문장(컴포넌트)이 변하기 때문에 사용을 꺼리곤 합니다. 하지만 반대로 어떤 상태가 변경되면 모든 맥락안에 모든 문장이 변경되어야하는 상황이라면 ContextAPI는 그럭저럭 쓸만한 도구입니다. 리액트를 배울 때, ContextAPI에 대해서 궁금한적은 없었습니다. 어차피 상태관리 도구가 아니라고 하니 그냥 상태 관리 도구를 설치해 사용하는 방향으로 급하게 나갔습니다. 이 방법이 틀렸다는 것은 아닙니다. 리액트에서 상태 관리는 아니 프로그래밍에서 상태 관리는 너무나도 중요해서 이 주제를 건너 뛰고서는 객체 지향 프로그램이든 함수형 프로그래밍이든 논할 수 가 없기 때문에 상태관리가 무엇인지 병적으로 집착하는 것은 프로그래밍을 학습하는 올바른 방향일 수 있습니다. 상태를 어떻게 바라보느냐에 따라 그 프로그램의 설계 방향이 달라질 수 있기 때문입니다.

'그럼 도대체 ContextAPI는 뭐데?? 언제 써야한다는 거지??'라고 누군가는 생각할 수 있습니다. 의외로 잘 알려져 있는 Compound 패턴을 보면 ContextAPI가 뭔지는 잘은 모르겠지만 이렇게 쓰이는구나 라고 감을 잡을 수 도 있습니다.

이후에 react-router-dom, framer의 motion 같은 애니메이션 라이브러리를 까보면 의외로 ContextAPI를 사용해 구현되어 있는 것을 보고 조금 놀라긴 했습니다. 처음에 AnimationPresence를 사용하면서 컴포넌트의 생애가 분명 끝났는데 animation 상태가 전달 되는 것이 신기해서 깃헙을 봤습니다. 하지만 package.json에는 상태 관리 도구를 찾아볼 수 없었고, AnimationPresence를 까보고 ContextAPI로 맥락을 전달한다는 것이 어쩐지 맥이 빠지는 일이었습니다.

사실 ContextAPI도 결국 createContext를 사용해 구현하고 나면 함수입니다. state를 가지고 있기 때문에 상태가 없다고는 볼 수 없습니다. 하지만 상태를 관리하는 '도구'로 보지 않는 것이 React 설계자들의 의도인 것 같습니다.
